<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Orders</title>
    <link rel="stylesheet" href="styles.css"> <!-- Assuming you have a styles.css for styling -->
</head>

<body>
<h1>My Orders</h1>

<!-- Display user info -->
<h2>User Information:</h2>
<p>User Name: <%= user ? user.username : 'No user available' %></p>
<p>User Role: <%= user ? user.role : 'No user available' %></p>

<h2>Order History</h2>
<% if(orders && orders.length > 0) { %>
    <ul>
        <% orders.forEach(order => { %>
            <li>
                <h3>Username: <%= order.userId ? order.userId.username : 'Unknown' %></h3>

                <p>Order Status: <%= order.orderStatus || 'Unknown' %></p>

                <!-- Displaying order items -->
                <h4>Ordered Items:</h4>
                <% if(order.itemList && order.itemList.length > 0) { %>
                    <ul>
                        <% order.itemList.forEach(item => { %>
                            <li>Name: <%= item.name %>, Quantity: <%= item.quantity %>, Price: $<%= item.price %></li>
                        <% }); %>
                    </ul>
                <% } else { %>
                    <p>No items available for this order.</p>
                <% } %>

                <!-- Additional order details -->
                <p>Total Cost: $<%= order.totalCost %></p>
                <p>Description: <%= order.description %></p>
            </li>
        <% }); %>
    </ul>
<% } else { %>
    <p>You have no past orders.</p>
<% } %>

<br>
<button type="button" onclick="window.location.href = '/'">Back to Home</button>
<button type="button" onclick="window.location.href = '/checkout'">Go to Checkout</button>
<button type="button" onclick="window.location.href = '/logout'">Log Out</button> <!-- Updated the href to '/logout' -->
</body>

</html>
